<?php
$this->view->setVar('title', 'Show: '.$this->view->podcast->name);
?>

<div class="clearfix">
    <img class="pull-left" src="<?=\DF\Url::content($this->view->podcast->image_url) ?>" style="width: 150px; margin-right: 10px;">

    <blockquote>
        <p><?=nl2br($this->view->podcast->description) ?></p>
    </blockquote>

    <div class="buttons">
        <?=$this->viewHelper->button(array(
            'type'      => 'link',
            'icon'      => 'icon-rss',
            'href'      => $this->viewHelper->routeFromHere(array('action' => 'feed', 'type' => 'single')),
            'text'      => 'Episode RSS Feed',
            'target'    => '_blank',
        )) ?>
    </div>
</div>

<dl>
    <dt>URL:</dt>
    <dd><a href="<?=$this->view->podcast->web_url ?>"><?=$this->view->podcast->web_url ?></a></dd>

<? if (count($this->view->podcast->stations) > 0): ?>
    <dt>Also airs on:</dt>
    <dd>
    <? foreach($this->view->podcast->stations as $station): ?>
        <div><?=$station->name ?></div>
    <? endforeach; ?>
    </dd>
<? endif; ?>
</dl>

<br>
<h2>Recent Episodes</h2>

<? foreach($this->view->episodes as $ep): ?>
    <h4>
        <small><?=date('l, F j, Y g:ia', $ep['timestamp']) ?></small><br>
        <a href="<?=$ep['web_url'] ?>" target="_blank"><?=$ep['title'] ?></a>
    </h4>
<? if ($ep['description']): ?>
    <p><?=\DF\Utilities::truncateText($ep['description'], 500) ?></p>
<? endif; ?>
<? endforeach; ?>